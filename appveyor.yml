version: '1.0.{build}'
image: Visual Studio 2017

init:
- dotnet --info

environment:  
  DOCKER_USER:
    secure: tuvYPlVYg0PZLnBt+UZnxw==
  DOCKER_PASS:
    secure: UTjxeq5UB9NSf1QUF3rUvw==

install:  
  - docker version

build_script:  
  - docker build -t .\docker\nanoserver.dockerfile .

deploy_script:  
  - docker login -u="$env:DOCKER_USER" -p="$env:DOCKER_PASS"
  - docker push stuartshay/coredatastore-windowsservercore




#build_script:
#- cmd: dotnet publish .\src\CoreDataStore.Web


#test_script:
#- ps: foreach ($d in dir .\test |? {$_.PSIsContainer -eq $True}){ &"dotnet" "test" $d.FullName }

#artifacts:
#  path: .\src\CoreDataStore.Web\bin\Debug\netcoreapp1.0\publish
